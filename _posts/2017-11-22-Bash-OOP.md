---
layout: post
title: Object Oriented Programming in Bash
published: false
category: tools
tags:
    - bash
---

### 基于对象的编程模式能够分割代码的逻辑，使代码更容易理解和维护。Bash作为一种比较初级的脚本，不支持OOP。在编写bash脚本的过程中，属于同一逻辑对象的代码散落在一个脚本甚至多个脚本之中，不仅代码难懂，而且很难修改。为了解决这个问题，可以利用Bash中的一个具有元编程特性的命令eval，实现OOP编程模式。

### 需要解决下面的问题：
1. 创建类，方法和属性
2. 把属性和方法绑定到类
3. 把C++式方法调用翻译到具体的方法实现

### 实现思路
- 由于方法和属性在bash中是全局的，所以对每一个类都要维护一个自己的方法和属性的列表，虽然不能屏蔽外界的访问，但是可以通过赋予唯一的ID确定它属于哪个对象。
```
uuid=$(uuidgen)

eval "CLASS_${className}_${uuid}_var = \"var1 var2\""
eval "CLASS_${className}_${uuid}_func = \"func1 func2\""
```